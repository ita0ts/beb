<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Medidor de Bebedeira üç∫ (vers√£o zoeira)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body {
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background: linear-gradient(135deg,#ffdd99,#ff9a9e);
      color:#222;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      min-height:100vh;
      margin:0;
      padding:20px;
      text-align:center;
    }
    .card {
      width:100%;
      max-width:720px;
      background:rgba(255,255,255,0.9);
      padding:18px;
      border-radius:12px;
      box-shadow:0 6px 24px rgba(0,0,0,0.12);
    }
    textarea {
      width:100%;
      min-height:120px;
      border-radius:8px;
      border:1px solid rgba(0,0,0,0.08);
      padding:10px;
      font-size:1rem;
      resize:vertical;
    }
    .controls {
      margin-top:10px;
      display:flex;
      gap:8px;
      justify-content:center;
      flex-wrap:wrap;
    }
    button {
      background:#ff4b2b;
      color:white;
      border:none;
      padding:10px 16px;
      border-radius:20px;
      cursor:pointer;
      font-weight:600;
    }
    button.secondary {
      background:#fff;
      color:#ff4b2b;
      border:2px solid #ff4b2b;
    }
    .resultado {
      margin-top:14px;
      font-size:1.15rem;
      font-weight:700;
    }
    .meter {
      margin-top:10px;
      height:18px;
      background:rgba(0,0,0,0.06);
      border-radius:999px;
      overflow:hidden;
    }
    .meter > i {
      display:block;
      height:100%;
      width:0%;
      background:linear-gradient(90deg,#ffd54a,#ff6f61);
      transition:width .6s ease;
    }
    small {display:block; margin-top:6px; color:#555}
  </style>
</head>
<body>
  <div class="card">
    <h1>üçª Medidor de Bebedeira ‚Äî Zoa√ß√£o</h1>
    <p>Cole uma mensagem a√≠ e ele fala o n√≠vel de zoeira/bebedeira (n√£o √© s√©rio üòÖ)</p>
    <textarea id="mensagem" placeholder="Ex.: ahhh cara, to com tanta saudade... kkkkkkk"></textarea>
    <div class="controls">
      <button id="analisarBtn">Analisar üç∫</button>
      <button id="limparBtn" class="secondary">Limpar</button>
    </div>

    <div class="resultado" id="resultado" aria-live="polite"></div>
    <div class="meter"><i id="meterBar"></i></div>
    <small id="detalhes"></small>
  </div>

  <script>
    // Fun√ß√£o utilit√°ria: remove acentos (para facilitar regex)
    function stripAccents(str) {
      return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
    }

    function analisarTexto(raw) {
      const texto = raw || "";
      const textoTrim = texto.trim();
      if (!textoTrim) return { score: 0, frase: "Digite alguma coisa primeiro üòÖ", details: "" };

      // normaliza: sem acentos e em min√∫sculas para facilitar matches
      const clean = stripAccents(textoTrim).toLowerCase();

      let score = 0;
      const detailsArr = [];

      // 1) Alongamentos de vogal (aa, aaa) - conta ocorr√™ncias de 2+ vogais seguidas
      const longVowels = (clean.match(/[aeiou]{2,}/g) || []).length;
      if (longVowels) { score += Math.min(longVowels * 8, 30); detailsArr.push(`${longVowels} alongamento(s)`); }

      // 2) Risadas: kkkkk, hahahaha, rsrsrs
      const laughK = (clean.match(/k{2,}/g) || []).length;
      const laughHa = (clean.match(/h[aeiou]{1,}h[aeiou]{0,}/g) || []).length; // approximado
      const laughRs = (clean.match(/(rs){1,}/g) || []).length;
      const laughs = laughK + laughHa + laughRs;
      if (laughs) { score += Math.min(laughs * 7, 30); detailsArr.push(`${laughs} risada(s)`); }

      // 3) Pontua√ß√£o exagerada: !!! ??? !!!?
      const puncts = (textoTrim.match(/[!?]{2,}/g) || []).length;
      if (puncts) { score += Math.min(puncts * 6, 20); detailsArr.push(`${puncts} pontua√ß√£o(√µes) exagerada(s)`); }

      // 4) Emo√ß√£o / ex (palavras "te amo", "saudade", "ex", "volta", "amo")
      const emotional = (clean.match(/\b(te amo|teamo|amo|saudade|ex|volta|senti sua falta|senti falta)\b/g) || []).length;
      if (emotional) { score += Math.min(emotional * 12, 36); detailsArr.push(`${emotional} palavra(s) emotiva(s)`); }

      // 5) Texto longo (text√£o)
      if (textoTrim.length > 120) { score += 10; detailsArr.push("text√£o"); }

      // 6) CAPS: palavras com 4+ letras em mai√∫sculas no texto original
      const capsWords = (texto.match(/\b[A-Z]{4,}\b/g) || []).length;
      if (capsWords) { score += Math.min(capsWords * 8, 24); detailsArr.push(`${capsWords} CAPS`); }

      // 7) Emojis / s√≠mbolos (conta emojis b√°sicos)
      const emojiCount = (texto.match(/[\p{Emoji_Presentation}\p{Emoji}\u2600-\u27BF]/gu) || []).length;
      if (emojiCount) { score += Math.min(emojiCount * 6, 30); detailsArr.push(`${emojiCount} emoji(s)`); }

      // 8) URLs/mentions (mandar muitas msg com link pode aumentar a zoeira)
      const links = (texto.match(/https?:\/\/\S+/gi) || []).length;
      if (links) { score += Math.min(links * 6, 18); detailsArr.push(`${links} link(s)`); }

      // 9) Pequeno "truque" pra n√£o ficar sempre 0: se nada bateu, d√° uma chance pequena
      if (score === 0) {
        // leve pontua√ß√£o baseada em comprimento (curto e normal)
        const base = Math.min(Math.floor(textoTrim.length / 12), 10);
        score += base;
        if (base) detailsArr.push("pequena pontua√ß√£o por tamanho");
      }

      // normaliza para 0-100
      score = Math.round(Math.max(0, Math.min(score, 100)));

      // frases engra√ßadas por faixa
      let frase = "";
      if (score < 15) frase = "Quase nada ‚Äî parece que s√≥ tomou √°gua üíß";
      else if (score < 35) frase = "Um copinho s√≥ ‚Äî entretenimento controlado üç∑";
      else if (score < 55) frase = "T√° mais animado ‚Äî pode rolar text√£o e memes ü•≥";
      else if (score < 80) frase = "Alerta: mandar √°udio emocional √† vista üé§";
      else frase = "Perigo m√°ximo: celular devia estar confiscado üòÇüö´";

      const details = detailsArr.join(" ¬∑ ") || "Nenhum sinal forte detectado";

      return { score, frase, details };
    }

    // UI hookup
    const analisarBtn = document.getElementById("analisarBtn");
    const limparBtn = document.getElementById("limparBtn");
    const resultadoEl = document.getElementById("resultado");
    const meterBar = document.getElementById("meterBar");
    const detalhesEl = document.getElementById("detalhes");
    const textarea = document.getElementById("mensagem");

    function runAnalise() {
      const out = analisarTexto(textarea.value);
      resultadoEl.innerHTML = `N√≠vel de bebedeira: ${out.score}% ‚Äî ${out.frase}`;
      meterBar.style.width = out.score + "%";
      detalhesEl.textContent = out.details;
    }

    analisarBtn.addEventListener("click", runAnalise);
    textarea.addEventListener("keydown", function(e){
      if (e.key === "Enter" && (e.ctrlKey || e.metaKey)) runAnalise();
    });
    limparBtn.addEventListener("click", function(){
      textarea.value = "";
      resultadoEl.textContent = "";
      meterBar.style.width = "0%";
      detalhesEl.textContent = "";
      textarea.focus();
    });

    // teste r√°pido autom√°tico (opcional) ‚Äî comente se quiser
    // textarea.value = "ahh cara to com tanta saudade... kkkkkkkkkkkkk!!! te amo";
    // runAnalise();
  </script>
</body>

</html>